<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="../../static/css/style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=McLaren&display=swap" rel="stylesheet">
        <script src="../../static/js/script.js"></script>
    </head>
    <body>
        <!--<div id="webname">
            <h2>Pawfect Match</h2>
        </div>-->
        <div id="stars"></div>
        <div id="stars2"></div>
        <div id="stars3"></div>
        <div>
            <nav>
                <ul class="sidebar">
                    <li onclick=hideSidebar()><a class="current-tab" href="#"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#b9a4db"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a></li>
                    <li><a href="gallery.html">Look for Your Pet!</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="quiz-intro.html">Find Your Pawfect Match</a></li>
                </ul>
                <ul>
                    <li><a class="current-tab" href="home.html">Pawfect Match</a></li>
                    <li class="hideOnMobile"><a href="gallery.html">Look for Your Pet!</a></li>
                    <li class="hideOnMobile"><a href="about.html">About Us</a></li>
                    <li class="hideOnMobile"><a href="quiz-intro.html">Find Your Pawfect Match</a></li>
                    <li class="menu-button" onclick=showSidebar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#b9a4db"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></a></li>
                </ul>
            </nav>
            <script>
                function showSidebar(){
                    const sidebar = document.querySelector('.sidebar')
                    sidebar.style.display = 'flex'
                }
                function hideSidebar(){
                    const sidebar = document.querySelector('.sidebar')
                    sidebar.style.display = 'none'
                }
            </script>
        </div>
        <div class="container quiz-container">
        
        <div class="progress-bar">
            <div class="paw-indicator" id="paw1">üêæ</div>
            <div class="paw-indicator" id="paw2">üêæ</div>
            <div class="paw-indicator" id="paw3">üêæ</div>
        </div>
        
        <div class="quiz-content">
            <div class="cat-avatar">
                <div class="logo"><img src="../../static/images/pawbloblink.gif" alt="PAWBLO"></div>
                <div class="speech-bubble" id="question-text">
                    Question will appear here
                </div>
            </div>
            
            <div class="answers-container" id="answers-container">
                <!-- Answers will be dynamically inserted here -->
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
    async function submitQuiz(preferences) {
        const params = new URLSearchParams(preferences).toString();
        const res = await fetch(`/api/quiz-pets?${params}`);
        const data = await res.json();

  // Save for results page
        localStorage.setItem('quizMatches', JSON.stringify(data.pets || []));
        localStorage.setItem('resultTitle', 'Your Pawfect Match');
        const descBits = [];
        if (preferences.species) descBits.push(preferences.species);
        if (preferences.age) descBits.push(preferences.age);
        if (preferences.sex) descBits.push(preferences.sex);
        localStorage.setItem('resultDescription', descBits.join(' ‚Ä¢ '));

  // Go to results
        window.location.href = '/results.html';
}

/* --- Example hookup: replace this with your real quiz completion handler --- */
window.exampleFinishQuiz = function () {
  // TODO: derive these from the user's answers
    submitQuiz({ species: 'dogs', age: 'Adult', sex: 'Female', limit: 12 });
};
    </script>
</body>
</html>
